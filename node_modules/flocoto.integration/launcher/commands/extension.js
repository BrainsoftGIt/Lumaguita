"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = exports.startBuilderOptions = exports.builder = exports.desc = exports.command = void 0;
const base_1 = require("../util/base");
const merge_1 = require("../util/merge");
const index_1 = __importDefault(require("../../index"));
exports.command = "start";
exports.desc = "Start a extension";
const builder = yargs => {
    return (0, base_1.baseOpts)(startBuilderOptions(yargs), value => {
        return Object.assign({});
    });
};
exports.builder = builder;
function startBuilderOptions(yargs) {
    Object.entries(index_1.default.DefaultEnvObjects).forEach(([key, object]) => {
        Object.entries(object).forEach(([props, sample]) => {
            let define = (0, merge_1.launcherOptionsDefinition)(sample);
            if (!define)
                return;
            yargs.option(`${key}.${props}`, Object.assign(Object.assign({}, define), { description: `${key} ${props}` }));
        });
    });
    return yargs;
}
exports.startBuilderOptions = startBuilderOptions;
const handler = function (argv) {
    (0, merge_1.launcherPrepareOptions)(argv, index_1.default.DefaultEnvObjects);
    index_1.default.context.define(argv);
    let server = require("../../../libs/integration.extension.workflow/extension");
    server.main(argv);
};
exports.handler = handler;
//# sourceMappingURL=extension.js.map